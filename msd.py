import subprocess
import os
if True:
    subprocess.call([os.getcwd]+'requirements.bat')


import time
import requests
from bs4 import BeautifulSoup

try: 
    os.system('cls' if os.name == 'nt' else 'clear')
    siteSelection = input("\t\t\t\t\t\t\t\tSelect a site that you would like to download samples from...\n\n1: dasmalwerk.eu\n\n\n\nSelection: ")
    os.system('cls' if os.name == 'nt' else 'clear')


    if siteSelection == '1':
        file_url = "https://das-malwerk.herokuapp.com/"
        req = requests.get(file_url)

        with open("dasmalwerk.html", "wb") as html:
            html.write(req.content)
        soup = BeautifulSoup(req.content, 'html.parser')
        tableBody = soup.find_all('tbody')

        print('|Title|__________________________________________________________________________________________|Links|')

        for table in tableBody:
            for block in table:
                title = str(block.find('td'))
                links = str(block.find('a')).replace('<a href=','').replace('"','')  
                sep = '>'
                downloadLink = links.split(sep, 1)[0]
                print(title.replace('-1','').replace('<td>','').replace('</td>',''), "\t\t\t\t\t\t\t\t", downloadLink)
                
        
        URLdownload = input("\n\n\nSelect a URL, copy and paste it here to download: ")

        if True:
            
            def download_url():
                req = requests.get(URLdownload, stream=True)

                with open("file.zip", "wb") as file:
                    file.write(req.content)

                print("File downloaded successfully.")
                os.remove(r'\dasmalwerk.html')

            download_url()



except  KeyboardInterrupt:
    os.system('cls' if os.name == 'nt' else 'clear')
    print('\nProgram Terminated...Exiting.')
    time.sleep(2)
    os.system('cls' if os.name == 'nt' else 'clear')
    

